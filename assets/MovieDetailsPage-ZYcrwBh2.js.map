{"version":3,"file":"MovieDetailsPage-ZYcrwBh2.js","sources":["../../src/pages/movieDetailsPage/MovieDetailsPage.jsx"],"sourcesContent":["import {\n  Link,\n  NavLink,\n  Outlet,\n  useLocation,\n  useParams,\n} from \"react-router-dom\";\nimport { fetchMovieDetails } from \"../../service/api\";\nimport { useState, useEffect, useRef } from \"react\";\nimport s from \"./MovieDetailsPage.module.css\";\nimport clsx from \"clsx\";\n\nconst buildLinkClass = ({ isActive }) => {\n  return clsx(s.addInfoLink, isActive && s.active);\n};\n\nconst MovieDetailsPage = () => {\n  const { movieId } = useParams();\n  const [movieDetails, setMovieDetails] = useState(null);\n\n  const location = useLocation();\n  const goBackUrl = useRef(location?.state ?? \"/movies\");\n\n  useEffect(() => {\n    const getDetails = async () => {\n      const movies = await fetchMovieDetails(movieId);\n      setMovieDetails(movies);\n      console.log(movies);\n    };\n    getDetails();\n  }, [movieId]);\n\n  if (!movieDetails) {\n    return <p>Loading...</p>;\n  }\n\n  const roundedScore = Math.round(movieDetails.popularity);\n  const movieGenres = movieDetails.genres;\n  const releaseYear = movieDetails.release_date.slice(0, 4);\n  console.log(\"Genres\", movieGenres);\n\n  return (\n    <div>\n      <div className={s.allDetails}>\n        <Link className={s.button} to={goBackUrl.current}>\n          ‚Üê Go back\n        </Link>\n        <div className={s.movieInfo}>\n          <img\n            src={`https://image.tmdb.org/t/p/w300${movieDetails.poster_path}`}\n          ></img>\n          <div className={s.movieDetails}>\n            <h1 className={s.movieTitle}>\n              {movieDetails.title} ({releaseYear})\n            </h1>\n            <p>User score: {roundedScore}%</p>\n            <h2>Overview</h2>\n            <p>{movieDetails.overview}</p>\n            <p className={s.genresTitle}>Genres</p>\n            <ul className={s.ulGenres}>\n              {movieGenres.map((genre) => (\n                <li key={genre.id} className={s.liGenres}>\n                  {genre.name}\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div className={s.additionalInfoDiv}>\n        <p className={s.addInfoTitle}>Additional information</p>\n        <div className={s.linkDiv}>\n          <NavLink\n            to={`/movies/${movieDetails.id}/cast`}\n            className={buildLinkClass}\n          >\n            Cast\n          </NavLink>\n          <NavLink\n            to={`/movies/${movieDetails.id}/reviews`}\n            className={buildLinkClass}\n          >\n            Reviews\n          </NavLink>\n        </div>\n        <Outlet />\n      </div>\n    </div>\n  );\n};\n\nexport default MovieDetailsPage;\n"],"names":["buildLinkClass","isActive","clsx","MovieDetailsPage","movieId","useParams","movieDetails","setMovieDetails","useState","location","useLocation","goBackUrl","useRef","useEffect","movies","fetchMovieDetails","jsx","roundedScore","movieGenres","releaseYear","jsxs","Link","genre","NavLink","Outlet"],"mappings":"8dAYMA,EAAiB,CAAC,CAAE,SAAAC,KACjBC,EAAK,EAAE,YAAaD,GAAY,EAAE,MAAM,EAG3CE,EAAmB,IAAM,CACvB,KAAA,CAAE,QAAAC,CAAQ,EAAIC,EAAU,EACxB,CAACC,EAAcC,CAAe,EAAIC,EAAAA,SAAS,IAAI,EAE/CC,EAAWC,EAAY,EACvBC,EAAYC,EAAA,QAAOH,GAAA,YAAAA,EAAU,QAAS,SAAS,EAWrD,GATAI,EAAAA,UAAU,IAAM,EACK,SAAY,CACvB,MAAAC,EAAS,MAAMC,EAAkBX,CAAO,EAC9CG,EAAgBO,CAAM,EACtB,QAAQ,IAAIA,CAAM,CACpB,GACW,CAAA,EACV,CAACV,CAAO,CAAC,EAER,CAACE,EACI,OAAAU,EAAA,IAAC,KAAE,SAAU,YAAA,CAAA,EAGtB,MAAMC,EAAe,KAAK,MAAMX,EAAa,UAAU,EACjDY,EAAcZ,EAAa,OAC3Ba,EAAcb,EAAa,aAAa,MAAM,EAAG,CAAC,EAChD,eAAA,IAAI,SAAUY,CAAW,SAG9B,MACC,CAAA,SAAA,CAACE,EAAA,KAAA,MAAA,CAAI,UAAW,EAAE,WAChB,SAAA,CAAAJ,EAAAA,IAACK,GAAK,UAAW,EAAE,OAAQ,GAAIV,EAAU,QAAS,SAElD,WAAA,CAAA,EACCS,EAAA,KAAA,MAAA,CAAI,UAAW,EAAE,UAChB,SAAA,CAAAJ,EAAA,IAAC,MAAA,CACC,IAAK,kCAAkCV,EAAa,WAAW,EAAA,CAChE,EACAc,EAAA,KAAA,MAAA,CAAI,UAAW,EAAE,aAChB,SAAA,CAACA,EAAA,KAAA,KAAA,CAAG,UAAW,EAAE,WACd,SAAA,CAAad,EAAA,MAAM,KAAGa,EAAY,GAAA,EACrC,SACC,IAAE,CAAA,SAAA,CAAA,eAAaF,EAAa,GAAA,EAAC,EAC9BD,EAAAA,IAAC,MAAG,SAAQ,UAAA,CAAA,EACZA,EAAAA,IAAC,IAAG,CAAA,SAAAV,EAAa,QAAS,CAAA,EACzBU,EAAA,IAAA,IAAA,CAAE,UAAW,EAAE,YAAa,SAAM,SAAA,QAClC,KAAG,CAAA,UAAW,EAAE,SACd,SAAAE,EAAY,IAAKI,SACf,KAAkB,CAAA,UAAW,EAAE,SAC7B,SAAAA,EAAM,MADAA,EAAM,EAEf,CACD,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EACF,EACCF,EAAA,KAAA,MAAA,CAAI,UAAW,EAAE,kBAChB,SAAA,CAAAJ,EAAA,IAAC,IAAE,CAAA,UAAW,EAAE,aAAc,SAAsB,yBAAA,EACnDI,EAAA,KAAA,MAAA,CAAI,UAAW,EAAE,QAChB,SAAA,CAAAJ,EAAA,IAACO,EAAA,CACC,GAAI,WAAWjB,EAAa,EAAE,QAC9B,UAAWN,EACZ,SAAA,MAAA,CAED,EACAgB,EAAA,IAACO,EAAA,CACC,GAAI,WAAWjB,EAAa,EAAE,WAC9B,UAAWN,EACZ,SAAA,SAAA,CAAA,CAED,EACF,QACCwB,EAAO,CAAA,CAAA,CAAA,CACV,CAAA,CAAA,EACF,CAEJ"}